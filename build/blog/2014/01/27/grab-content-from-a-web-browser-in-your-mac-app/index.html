
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <title>Grab content from a web browser in your Mac app - Danger Cove</title>
  
  <meta name="author" content="Danger Cove">  
  

  <meta name="description" content="One of my favorite features of Tapetrap is its ability to subscribe to a website while surfing the web with your browser. Instead of looking for the &hellip;">
  <meta name="keywords" content="">

  <meta content="Grab content from a web browser in your Mac app - Danger Cove" property="og:title" />
  <meta content="website" property="og:type" />
  <meta content="http://www.dangercove.com/blog/2014/01/27/grab-content-from-a-web-browser-in-your-mac-app/" property="og:url" />
  
  <meta content="http://www.dangercove.com/images/facebook.png" property="og:image" />
  
  <meta content="One of my favorite features of Tapetrap is its ability to subscribe to a website while surfing the web with your browser. Instead of looking for the &hellip;" property="og:description" />

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fav and touch icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/ico/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/ico/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/ico/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="/assets/ico/apple-touch-icon-57-precomposed.png">
  <link rel="shortcut icon" href="/assets/ico/favicon.png">

  
  <link rel="canonical" href="http://www.dangercove.com/blog/2014/01/27/grab-content-from-a-web-browser-in-your-mac-app/">

  <link href="/assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
  <link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen-responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  

  <script src="/javascripts/modernizr-2.0.js"></script>

  <link href="/atom.xml" rel="alternate" title="Danger Cove" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<meta property="fb:app_id" content="378920798808373">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@dangercove">
<meta name="twitter:title" content="Grab content from a web browser in your Mac app - Danger Cove">
<meta name="twitter:description" content="One of my favorite features of Tapetrap is its ability to subscribe to a website while surfing the web with your browser. Instead of looking for the &hellip;">
<meta name="twitter:creator" content="@boyvanamstel">
<meta name="twitter:image:src" content="http://www.dangercove.com/images/facebook.png">
<meta name="twitter:domain" content="dangercove.com">
<!--
<meta name="twitter:app:name:iphone" content="">
<meta name="twitter:app:name:ipad" content="">
<meta name="twitter:app:name:googleplay" content="">
<meta name="twitter:app:url:iphone" content="">
<meta name="twitter:app:url:ipad" content="">
<meta name="twitter:app:url:googleplay" content="">
<meta name="twitter:app:id:iphone" content="">
<meta name="twitter:app:id:ipad" content="">
<meta name="twitter:app:id:googleplay" content="">
-->
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27275793-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body   >
  <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="/"><img src="/images/logo.png" alt="Danger Cove"></a>
      <div class="nav-collapse collapse">
        <!-- <li class=""><a href="/">Adventures</a></li> -->
<ul class="nav">
  <li class=""><a href="http://www.getdenied.com" target="_blank">Denied</a></li><li class=""><a href="/porthole/">Porthole</a></li><li class=""><a href="/airvlc/">AirVLC</a></li><li class=""><a href="/reign/">Reign</a></li>
</ul>
<ul class="nav pull-right">
  <li class="active"><a href="/blog">Journal</a></li>
  <li class=""><a href="/support">Support</a></li>
  <li class=""><a href="/about">About</a></li>
  
  <li>
  <form class="navbar-form" action="http://google.com/search" method="get">
    <input type="hidden" name="q" value="site:www.dangercove.com" />
    <input class="search" type="text" name="q" placeholder="Search"/>
  </form>
  </li>
  
  
</ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

  <div class="container">
  <div class="row">
    <div class="span8">
    <article class="hentry" role="article">
      
  <header>
    
      <h1 class="entry-title">Grab Content From a Web Browser in Your Mac App</h1>
    
  </header>


<div class="entry-content"><p>One of my favorite features of <a href="http://www.dangercove.com/tapetrap">Tapetrap</a> is its ability to subscribe to a website while surfing the web with your browser. Instead of looking for the RSS feed manually and copy-pasting the link, you can click a button and Tapetrap will find and add the feed for you. In this article I want to go over why I think that&#8217;s awesome and how it works. The source code for the URL grabbing is <a href="https://github.com/DangerCove/DCOURLGrabber">available on GitHub</a>.</p>

<div class="thumbnail">
<iframe width="620" height="349" src="//www.youtube.com/embed/zzoGEhWTXRw?rel=0&amp;vq=hd720" allowfullscreen></iframe>
<div class="caption">
Adding feeds from your web browser in Tapetrap
</div>
</div>




<!-- more -->


<h2>Not a browser plugin</h2>

<p>I&#8217;ve <a href="https://chrome.google.com/webstore/detail/treasure-chest-radio-3fm/geeoeokcenpaehoemkfdjfmnobopefck">made</a> and use a few browser extensions. They&#8217;re neat little applications that take an insane amount of work to maintain. While some code can be shared you will need to tailer parts of the extension for each browser specifically.</p>

<p>For Tapetrap, I chose to make a system wide browser extension in the form of an icon in the menu bar that &#8220;just works&#8221; with the active web browser when clicked. This means users don&#8217;t have to install anything extra and I don&#8217;t have to create a plugin per browser. I can&#8217;t say I&#8217;m the first one to do something like this, but it works particularly well for Tapetrap.</p>

<div class="thumbnail">
<img src="/images/content/tapetrap-ss-menubar.jpg" title="Add Feeds While Surfing the Web" alt="Add Feeds While Surfing the Web">
</div>


<p>Of course there are downsides to using this approach too. It&#8217;s impossible to manipulate the DOM inside the browser or execute other more context aware methods. It&#8217;s fine for getting basic information, though.</p>

<h2>How grabbing works</h2>

<p>This is where it gets a little technical. I combined a basic menu bar app with my own URL grabber code, called <a href="https://github.com/DangerCove/DCOURLGrabber">DCOURLGrabber</a>, to get the URL from the web browser that was last active.</p>

<p>I&#8217;ll skip the menu bar icon part. There are plenty of <a href="http://kmikael.com/2013/07/01/simple-menu-bar-apps-for-os-x/">good tutorial</a>s that explain all you need. Instead I&#8217;ll talk about how to interact with the web browser.</p>

<h3>AppleScript</h3>

<p>Yep, AppleScript. Often used to automate tedious tasks, it&#8217;s also a great way to interface with other applications. For DCOURLGrabber I focussed on getting the URL from the selected tab of the key window of the web browser that was last active. This is the AppleScript for getting the URL in Google Chrome:</p>

<figure class='code'><figcaption><span>Grab URL From Chrome</span><a href='https://github.com/DangerCove/DCOURLGrabber/raw/master/AppleScripts/com.google.Chrome.scpt'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='applescript'><span class='line'><span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;Google Chrome&quot;</span>
</span><span class='line'>  <span class="k">get</span> <span class="nv">URL</span> <span class="k">of</span> <span class="na">active</span> <span class="no">tab</span> <span class="k">of</span> <span class="nb">first</span> <span class="na">window</span>
</span><span class='line'><span class="k">end</span> <span class="k">tell</span>
</span></code></pre></td></tr></table></div></figure>


<p>Simple enough right? For <a href="https://github.com/DangerCove/DCOURLGrabber/tree/master/AppleScripts">Safari and Opera</a> the command are very similar. The one for Firefox is a little longer.</p>

<figure class='code'><figcaption><span>Grab URL From Firefox</span><a href='https://github.com/DangerCove/DCOURLGrabber/raw/master/AppleScripts/org.mozilla.firefox.scpt'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='applescript'><span class='line'><span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;Firefox&quot;</span> <span class="k">to</span> <span class="nb">activate</span>
</span><span class='line'><span class="k">tell</span> <span class="nb">application</span> <span class="s2">&quot;System Events&quot;</span>
</span><span class='line'>  <span class="nv">keystroke</span> <span class="s2">&quot;l&quot;</span> <span class="nv">using</span> <span class="nv">command</span> <span class="nv">down</span>
</span><span class='line'>  <span class="nv">keystroke</span> <span class="s2">&quot;c&quot;</span> <span class="nv">using</span> <span class="nv">command</span> <span class="nv">down</span>
</span><span class='line'><span class="k">end</span> <span class="k">tell</span>
</span><span class='line'><span class="nb">delay</span> <span class="mf">0.5</span>
</span><span class='line'><span class="nb">the clipboard</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hopefully they&#8217;ll switch to a straightforward approach in a future update. In any case, after running these scripts they present the current URL of the browser window.</p>

<h3>Objective-C</h3>

<p>To run this in Objective-C, create a new Mac project in XCode, paste in the next piece of code in the <code>applicationDidFinishLaunching:</code> method and that&#8217;s it.</p>

<figure class='code'><figcaption><span>Get URL From Chrome in Objective-C</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// The script to run. You could also load this from a file as in DCOURLGrabber</span>
</span><span class='line'><span class="n">NSString</span> <span class="o">*</span><span class="n">chromeScript</span> <span class="o">=</span>
</span><span class='line'><span class="s">@&quot;tell application </span><span class="se">\&quot;</span><span class="s">Google Chrome</span><span class="se">\&quot;\n</span><span class="s">&quot;</span>
</span><span class='line'><span class="s">&quot;  get URL of active tab of first window</span><span class="se">\n</span><span class="s">&quot;</span>
</span><span class='line'><span class="s">&quot;end tell&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Load the script</span>
</span><span class='line'><span class="n">NSAppleScript</span> <span class="o">*</span><span class="n">script</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSAppleScript</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithSource:</span><span class="n">chromeScript</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Grab URL using AppleScript</span>
</span><span class='line'><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">scriptExecuteError</span><span class="p">;</span>
</span><span class='line'><span class="n">NSAppleEventDescriptor</span> <span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">script</span> <span class="nl">executeAndReturnError:</span><span class="o">&amp;</span><span class="n">scriptExecuteError</span><span class="p">];</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="n">scriptExecuteError</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Failed</span>
</span><span class='line'>  <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Error: %@&quot;</span><span class="p">,</span> <span class="n">scriptExecuteError</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Output: %@&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">stringValue</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using DCOURLGrabber it becomes even easier. Check the <a href="https://github.com/DangerCove/DCOURLGrabber">GitHub page</a> for more documentation.</p>

<figure class='code'><figcaption><span>Get URL From Chrome in Objective-C Using DCOURLGrabber</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="n">DCOURLGrabber</span> <span class="o">*</span><span class="n">grabber</span> <span class="o">=</span> <span class="p">[[</span><span class="n">DCOURLGrabber</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'><span class="n">NSURL</span> <span class="o">*</span><span class="n">url</span> <span class="o">=</span> <span class="p">[</span><span class="n">grabber</span> <span class="nl">grabURLFromBundleID:</span><span class="s">@&quot;com.google.Chrome&quot;</span> <span class="nl">withError:</span><span class="o">&amp;</span><span class="n">grabError</span><span class="p">];</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="n">grabError</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Failed to retrieve URL: %@&quot;</span><span class="p">,</span> <span class="n">grabError</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Got URL: %@&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="n">absoluteString</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Getting the RSS/Atom URL</h2>

<p>Websites that value their feeds will link to it from their website. Not only with the well-known orange button, but also through a meta tag in the source code of the website. This gives apps like Tapetrap a way of retrieving it.</p>

<p>The GameKings website has this setup correctly. Inspecting the source of <a href="http://gamekings.tv">http://gamekings.tv</a> reveals the following lines near the top of the document.</p>

<figure class='code'><figcaption><span>Get URL From Chrome in Objective-C Using DCOURLGrabber</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;RSS 2.0&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.gamekings.tv/feed/&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;text/xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;RSS .92&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.gamekings.tv/feed/rss/&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;application/atom+xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Atom 1.0&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.gamekings.tv/feed/atom/&quot;</span> <span class="o">/&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Gamekings Video&#39;s RSS Feed&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.gamekings.tv/rss?cat=3&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">&quot;alternate&quot;</span> <span class="n">type</span><span class="o">=</span><span class="s">&quot;application/rss+xml&quot;</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;Gamekings Nieuws RSS Feed&quot;</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.gamekings.tv/rss?cat=18&quot;</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>All links point to RSS feeds. There are some similarities between the lines. Using these conventions, it&#8217;s easy to extract them in code. Even easier with <a href="https://github.com/tracy-e/OCGumbo">OCGumbo</a>, which is a HTML5 parser. It converts RSS into Objective-C objects.</p>

<p>The following lines of code parse a simple HTML page, check the &#8216;type&#8217; parameter of the &#8216;link&#8217; meta tag for either application/rss+xml, application/atom+xml, rss+xml or atom+xml and log the link when it matches.</p>

<figure class='code'><figcaption><span>Log the Link to a RSS Feed Found in the Head</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="c1">// Create an array that contains the strings that can appear in the &#39;type&#39; property</span>
</span><span class='line'><span class="n">NSArray</span> <span class="o">*</span><span class="n">linkTypeFeedIndicators</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithObjects:</span><span class="s">@&quot;application/rss+xml&quot;</span><span class="p">,</span> <span class="s">@&quot;application/atom+xml&quot;</span><span class="p">,</span> <span class="s">@&quot;rss+xml&quot;</span><span class="p">,</span> <span class="s">@&quot;atom+xml&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">NSString</span> <span class="o">*</span><span class="n">htmlString</span> <span class="o">=</span>
</span><span class='line'><span class="s">@&quot;&lt;html&gt;&lt;head&gt;&quot;</span>
</span><span class='line'><span class="s">&quot;&lt;link rel=&#39;alternate&#39; type=&#39;application/rss+xml&#39; title=&#39;RSS 2.0&#39; href=&#39;http://www.gamekings.tv/feed/&#39; /&gt;&quot;</span>
</span><span class='line'><span class="s">&quot;&lt;/head&gt;&lt;body&gt;&quot;</span>
</span><span class='line'><span class="s">&quot;&lt;h1&gt;Feed discovery experiment&lt;/h1&gt;&quot;</span>
</span><span class='line'><span class="s">&quot;&lt;p&gt;Just testing ;).&lt;/p&gt;&quot;</span>
</span><span class='line'><span class="s">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Load the document from a string containing HTML</span>
</span><span class='line'><span class="n">OCGumboDocument</span> <span class="o">*</span><span class="n">document</span> <span class="o">=</span> <span class="p">[[</span><span class="n">OCGumboDocument</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithHTMLString:</span><span class="n">htmlString</span><span class="p">];</span>
</span><span class='line'><span class="n">OCGumboElement</span> <span class="o">*</span><span class="n">root</span> <span class="o">=</span> <span class="n">document</span><span class="p">.</span><span class="n">rootElement</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Loop through all &#39;link&#39; tags</span>
</span><span class='line'><span class="p">[</span><span class="n">root</span><span class="p">.</span><span class="n">Query</span><span class="p">(</span><span class="s">@&quot;link&quot;</span><span class="p">)</span> <span class="nl">enumerateObjectsUsingBlock:</span><span class="o">^</span><span class="p">(</span><span class="n">OCGumboElement</span> <span class="o">*</span><span class="n">element</span><span class="p">,</span> <span class="n">NSUInteger</span> <span class="n">idx</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">type</span> <span class="o">=</span> <span class="p">[</span><span class="n">element</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">@&quot;type&quot;</span><span class="p">)</span> <span class="n">stringByRemovingNewLinesAndWhitespace</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// Check if the type is equal to that of a RSS/Atom feed</span>
</span><span class='line'>    <span class="k">if</span><span class="p">([</span><span class="n">linkTypeFeedIndicators</span> <span class="nl">containsObject:</span><span class="n">type</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">NSString</span> <span class="o">*</span><span class="n">feedURLString</span> <span class="o">=</span> <span class="n">element</span><span class="p">.</span><span class="n">attr</span><span class="p">(</span><span class="s">@&quot;href&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Found a feed: %@&quot;</span><span class="p">,</span> <span class="n">feedURLString</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}];</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the URL of the RSS feed in hand, the road is clear to analyze its content using a RSS parser, or maybe use the URL for something different entirely.</p>

<h2>Real world example</h2>

<p>You can <a href="http://www.dangercove.com/tapetrap">download Tapetrap</a> to get a feel of how this works. The app is now in public beta and free to use. Also let me know what you think and help improve it!</p>
</div>


      <footer>
        <p class="meta">
          
<span class="byline author vcard">Posted by <span class="fn">Danger Cove</span></span>
          

  

<time datetime="2014-01-27T15:43:00+01:00" data-updated="true">on Jan 27<span>th</span>, 2014</time>
          

<span class="categories">in <a class='category' href='/blog/categories/open-source/'>open source</a>, <a class='category' href='/blog/categories/tapetrap/'>tapetrap</a>, <a class='category' href='/blog/categories/tutorials/'>tutorials</a></span>

        </p>
        
          <div class="sharing hidden-phone">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://www.dangercove.com/blog/2014/01/27/grab-content-from-a-web-browser-in-your-mac-app/" data-via="dangercove" data-counturl="http://www.dangercove.com/blog/2014/01/27/grab-content-from-a-web-browser-in-your-mac-app/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>
        
      </footer>
    </article>
    
    </div>
  </div>
</div>
<hr class="container">


  <footer id="footer" class="container">
  <p>
  Created with grog by Danger Cove in 2011-2015 - <a href="/terms">Terms</a> & <a href="/privacy">Privacy</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<div class="socials">
  <a href="http://twitter.com/dangercove" target="_blank"><img src="/images/icons/glyphicons_411_twitter@2x.png" alt="@dangercove"></a>
  <a href="http://facebook.com/dangercove" target="_blank"><img src="/images/icons/glyphicons_410_facebook@2x.png" alt="Danger Cove on Facebook"></a>
  <a href="http://github.com/dangercove" target="_blank"><img src="/images/icons/glyphicons_401_github@2x.png" alt="Danger Cove on GitHub"></a>
</div>
</footer>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script><script type="text/javascript">
  (function(){
    var twitterWidgets = document.createElement('script');
    twitterWidgets.type = 'text/javascript';
    twitterWidgets.async = true;
    twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
    document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
  })();
</script>
<script src="/javascripts/jquery.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/javascripts/plugins/screenshots.js"></script>
<script src="/javascripts/plugins/uservoice.js"></script>
<script src="/javascripts/scripts.js"></script>
</body>
</html>